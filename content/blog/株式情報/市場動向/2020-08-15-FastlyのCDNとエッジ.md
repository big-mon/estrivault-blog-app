---
title: FastlyのCDNとエッジ・コンピューティングへの取り組み
description: FastlyがどのようにCDNとエッジ・コンピューティングへ取り組んでいるのか、思想と技術の観点で紹介します。
slug: fastly-approach-cdn-and-edge-computing
publishedAt: 2020-08-15
coverImage: /Hero/fastly-logo_vcgkls.jpg
category: Stocks
tags: ['市場動向', 'FSLY']
---

CDN市場において注目を集めている新興テック企業に**Fastly**の名が挙がります。グロース株投資を行っている個人投資家の中でもよく名前を聞きます。しかし、どのような企業なのでしょうか？[Software Stack Investing](https://softwarestackinvesting.com/fastly-edge-compute-explained/)にて詳細が説明されていたため、かいつまんで紹介します。

# Fastlyの成り立ち

Fastlyは他のテック企業と同じように、顧客へより良い体験を提供することを目標としています。元々はCDNにおいて提供することを意図していましたが、現在ではその範囲を広げ**サーバーレスプラットフォームという領域での提供**を目指しています。

サーバーレスについて説明します。従来は企業がウェブサービスを提供する際には自前のサーバーを用意(オンプレミス)していることが普通でした。しかしこれではメンテナンスなど本業以外のことに手間がかかってしまうため、サーバーはそれを専門にしている企業に任せて自社はサービスの提供だけに専念するというスタイル(クラウド化)が浸透してきました。サービスを提供する企業にとってサーバーの存在を気にしなくても良い、という状態もしくはそのための関連サービスを総称してサーバーレスと呼称しています。

2011年にArtur BergmanによってFastlyは創業されました。WikiaのCTOを務めていたArturが、当時の既存CDNサービスに不満を感じたことがきっかけとなっています。当時のCDN市場はAkamaiやLimelightやAmazonが支配的でしたが、設定変更の反映などに時間がかかったり技術的なサポートが必要であったことが不満でした。この経験から**FastlyのCDNでは、DevOpsの実現性とプログラマビリティを重視した設計思想**となっています。DevOpsはシステム開発の手法の1つで、密接な連携による素早い試行錯誤の繰り返しを特徴としています。

Fastlyの旅路はZoom VideoがSkypeらが支配するビデオ会議に対する不満を改善しようとしたのと同様に、コモディティ化したと見られた市場に対する挑戦です。Fastlyの場合はコンテンツ配信と分散コンピューティングに関するインフラストラクチャーの市場への挑戦です。

# CDNにおけるFastlyの取り組み

![Evolution of Web Architecture](/Tech/fastly-developerContorolArea_xcgtyz.jpg)

## ソフトウェア主導の思想

他の多くのスタートアップ企業と同じく、Fastlyも資金に限りのある企業でした。そのためFastlyは世界中へ配置する POP(拠点)について、**他のPOPのような高価なハードウェアを取り揃えてトラフィック量を捌くのではなく、独自のソフトウェアを開発することで対応**することとしました。偶然もあったでしょうが、この選択がユースケースに応じた柔軟性という今日の強みに繋がっています。

2013年にArista Networksが独自ソフトウェアが実行可能なスイッチを発売したことで、FastlyはPOPへのトラフィック処理を想定していた通りに実現できるようになりました。これにPOP内のSilvertonという独自ルーティングソフトウェアを組み合わせたことで、高価なルーターと同等の機能を実現し**POP毎に数十万ドルを節約**できるようになりました。

## スーパーマーケット vs コンビニの思想

伝統的なCDNでは小規模なPOPを地理的に世界中に分散させ、世界中のユーザーが自身に最も近い位置からのPOPから応答を受け取ることでコンテンツ配信時間を短縮しています。しかし Fastly は小さな POP を世界中に分散させても、キャッシュできる量に限りがあるため結果的に配信時間を最適化できないと判断しました。**Fastlyはこれをスーパーマーケットとコンビニに例えて、近所にあるコンビニは確かに近いが商品数は少なく、スーパーマーケットであれば多少遠いがなんでも揃っている**と表現しています。

**Akamaiは約29万台のPOPを設置していますが、Fastlyは2020年6月時点で72台のみを設置**しています。

数が少ない分、もちろんFastlyのPOPの性能は高性能です。当時は真新しい高速ストレージであったSSDを採用したことに加え、ここでも独自のストレージエンジンを開発し高速化に取り組みました。特に頻繁にアクセスされる「いいね」ボタンなどはSSDのストレージ領域よりも根源に近い、CPUのL3キャッシュ領域に回すなどが例示されています。

## キャッシュパージ速度

Fastlyが顧客のアプリケーション運用に携わるエンジニアにヒアリングしたところ、CDNへの設定変更のツールやキャッシュを更新するために時間がかかりすぎることが不満となっていることが判明しました。従来は設定に問題があった場合でも、修正が適応されるまでに数時間を要することもありました。これに対応してFastlyは**素早い更新と設定機能を実装**しました。

現在のFastlyはコンテンツ配信のあらゆる側面をカスタマイズ可能、プログラム可能としており、それらのアプローチについて積極的に説明しています。エンジニア重視の姿勢が功を奏し、技術的に目が肥えた顧客を勝ち取ることに成功しています。

![fastly-digitalInnovatorsChoose](/Tech/fastly-digitalInnovatorsChoose_rgdkdf.jpg)

# エッジにおけるFastlyの取り組み

Fastlyは自身がポジションする市場規模を2022年には354億ドルと見込んでいます。前述したCDNはそのうち175億ドルで、残り179億ドルはエッジコンピューティング関連(WAFやDDoS対策、アプリケーション配信)です。CDNにおける取り組みは前述したとおりで、次はエッジコンピューティングに対する取り組みを見てみましょう。

エッジコンピューティングとはエッジ、つまり最終利用者であるユーザーに対する終端に位置する端末における機能を指します。FastlyにとってはPOPがエッジに当たります。

FastlyはPOPをカスタマイズ可能とした際に採用したVarnish Configuration Language(VLC)を通じて、POP内でのプログラマビリティを実現しました。しかしVLCは一般的な開発言語ではなく基礎的な要素が抜けています。しかし最近になってその短所を克服し、**POP内でフル機能の環境を実現しデベロッパーは補助アプリケーションを実行可能**となりました。

これにより例えばなるべく負荷を軽減したい本体サーバーへのアクセスを減らすため、世界中に分散したPOP上でクエリ処理を行い、パフォーマンスを改善することが可能です。本体サーバーへの負荷が減るだけでなく、**ユーザーに最も近いPOP上で応答を返すことができるため、ユーザーにとってもメリットが大きい**ことがポイントです。POP上で様々な処理が行えるという事は、これまで実現が難しかったユーザー属性に応じたコンテンツのカスタマイズや認証が行えるようになり、破壊的イノベーションとなる可能性があります。

昨今インターネット上のトラフィック量の上昇は留まることを知らず、ハードウェアの性能向上が追い付きづらい状況が続いています。今後もハードウェアの性能向上を通信量の増加が上回る場合、現在の1か所での集中処理から分散処理への移行が加速しFastlyにとって追い風となることが予想されます。Fastlyの分散コンピューティングは**Compute@Edge**の名前で2019年11月よりβ版が公開されており、2021年より正式リリースを予定しています。

Compute@EdgeでFastlyが実現したいことは、デベロッパーが**大規模で高速に安全な分散コンピューティングを実現するためのプラットフォームの提供**です。

# Fastlyが抱える競合とのリスク

AmazonのAWS、MicrosoftのAzure、GoogleのGCPなどクラウドベンダーの存在がFastlyにとってのリスクとなっています。彼らはすでにクラウド化により集中型コンピュータ市場で支配的に成長しつつあり、続いては分散コンピューティングへ手を伸ばすことは自明です。**現時点ではFastlyが技術的に一歩リードする立場**であり、いましばらくの猶予が残されています。

またFastlyに幸いなことにクラウドベンダーがあまりに強力であるため、**ユーザー企業はリスク分散の観点からプラットフォームへのロックインを避けたがる傾向**があります。必要があれば他のベンダーに乗り換えて、サービスを継続できるように体制を整えておくという需要です。マルチクラウド戦略といいますが、Fastlyのソリューションはこの需要を受け入れられるつくりとなっており、Fastly自身のリスクへの備えとなっています。

クラウドベンダー以外には同じく新興のCloudflareが存在します。同社のエッジコンピューティングはCloudflare Workersとして知られています。V8エンジンを利用しており、クラウドベンダーの類似品と比べて高速ですが、Fastlyのものの方がより高速です。セキュリティ観点でも他のクラウドベンダーに対して優秀です。**Cloudflareは優秀な開発者が在籍していることで知られるため、競合として注意**すべきです。

Akamaiなど伝統的なCDN業者もエッジコンピューティングを提供していますが、速度とセキュリティに関してFastlyとCloudlfareが一歩先を行くようです。
