---
import { buildUrl } from "../../../../packages/cloudinary-utils/index.ts";
const {
  publicId,
  alt = "",
  width = 800,
  height = 450,
  class: className = "",
} = Astro.props;

// cloudNameを環境変数から取得してbuildUrlに渡す
const cloudName = import.meta.env.PUBLIC_CLOUDINARY_CLOUD_NAME;
if (!cloudName) {
  throw new Error("Missing Cloudinary cloud name in environment");
}
const src = buildUrl(cloudName, publicId, { w: width, h: height });
---

<img
  src={src}
  alt={alt}
  width={width}
  height={height}
  class={className}
  loading="lazy"
/>
